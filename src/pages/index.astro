---
import { Image } from "astro:assets";

import BackOnTrackLayout from "../layouts/BackOnTrackLayout.astro";
import InteractiveMap from "../components/InteractiveMap.astro";
import PartnerModal from "../components/PartnerModal.astro";
import partners from "../../public/partners/partners.json";
---

<BackOnTrackLayout title="Home">
  <div class="flex h-full flex-grow flex-col p-5">
    <h1
      class="p-2 text-center text-3xl font-extrabold text-bot-blue md:text-6xl"
    >
      Our mission is...
    </h1>
    <h2
      class="p-2 text-center text-xl font-extrabold text-bot-blue md:text-4xl"
    >
      to serve the homeless and those suffering from food insecurity by
      coordinating student volunteers in our communities.
    </h2>
  </div>
  <div class="mx-auto w-full max-w-5xl">
    <InteractiveMap />
  </div>

  <section class="w-full bg-gray-50 py-12">
    <div class="mx-auto max-w-6xl px-4">
      <h2 class="mb-8 text-center text-3xl font-bold text-bot-blue md:text-4xl">
        Our Partners
      </h2>
      <p class="mb-12 text-center text-lg text-gray-600">
        We're proud to work alongside these amazing organizations
      </p>
      <div class="grid grid-cols-2 gap-6 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5">
        {
          partners.map((partner, index) => (
            <button
              type="button"
              onclick={`openPartnerModal(${index})`}
              class="group flex flex-col items-center rounded-lg bg-white p-6 shadow-md transition-all duration-300 hover:scale-105 hover:shadow-lg cursor-pointer"
              title={partner.description}
            >
              <Image
                src={partner.image}
                alt={`${partner.name} logo`}
                class="h-16 w-auto object-contain transition-opacity duration-300 group-hover:opacity-80 md:h-20"
                width="120"
                height="80"
                loading="lazy"
              />
              <span class="mt-3 text-center text-sm font-medium text-gray-700 md:text-base">
                {partner.name}
              </span>
            </button>
          ))
        }
      </div>
    </div>
  </section>

  <PartnerModal />

  <script src="/js/partner-modal.js" is:inline></script>
  <script define:vars={{ partners }}>
    document.addEventListener('DOMContentLoaded', function() {
      initializePartnerModal(partners);
    });
  </script>
</BackOnTrackLayout>
